<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
   crossorigin=""></script>
    <style type="text/css">
        body { padding: 0; margin: 0;}
        html, body, #mapid { height: 50vw; width: 50vw; }
        #mapid { margin-left: 25vw; margin-right: 25vw;}
    </style>
</head>
<body>
    <div id="background">
        <div id="mapid">
        <!-- Make sure all the code is called after the div and leaflet.js inclusion. -->
        <script>
            var mymap = L.map('mapid').setView([-23.550404, -46.633906], 16); 
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 20,
                id: 'mapbox/streets-v11',
                tileSize: 512,
                zoomOffset: -1,
                accessToken: 'pk.eyJ1IjoibWlzY2EiLCJhIjoiY2s3Z25uemw0MDFreTNlcGFtOXpicWhocCJ9.xOMk-ysHi99xpXF59k_eiA'
            }).addTo(mymap);

            mymap.locate({setView: true, maxZoom: 20});

            function onLocationFound(e) {
                var radius = e.accuracy;
                L.marker(e.latlng).addTo(mymap).bindPopup("You are within " + radius + " meters from this point").openPopup();
                L.circle(e.latlng, radius).addTo(mymap);
            }
            mymap.on('locationfound', onLocationFound);

            function onLocationError(e) {
                alert(e.message);
            }
            mymap.on('locationerror', onLocationError);
            
            var marker = L.marker([-23.550404, -46.633906]).addTo(mymap);
            marker.bindPopup("Popup test");
            var popup = L.popup().setLatLng([-23.551, -46.636906]).setContent("Click anywhere to dismiss.").openOn(mymap);

            var popup2 = L.popup();
            function onMapClick(e) {
                popup2.setLatLng(e.latlng).setContent("You clicked the map at " + e.latlng.toString() + ". Press the 'x' to dismiss.").openOn(mymap);
            }
            mymap.on('click', onMapClick);            
        </script>
    </div>

</body>
</html>